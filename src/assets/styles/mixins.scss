@use "sass:list";
@use "variables";

// ========================================
// MIXINS SCSS - SISTEMA DE FACTURACIÓN
// ========================================

// ========================================
// RESPONSIVE
// ========================================

// Mixin para breakpoints
@mixin respond-to($breakpoint) {
  @if $breakpoint == xs {
    @media (min-width: variables.$breakpoint-xs) { @content; }
  } @else if $breakpoint == sm {
    @media (min-width: variables.$breakpoint-sm) { @content; }
  } @else if $breakpoint == md {
    @media (min-width: variables.$breakpoint-md) { @content; }
  } @else if $breakpoint == lg {
    @media (min-width: variables.$breakpoint-lg) { @content; }
  } @else if $breakpoint == xl {
    @media (min-width: variables.$breakpoint-xl) { @content; }
  }
}

// Mixin para breakpoints hacia abajo
@mixin respond-to-down($breakpoint) {
  @if $breakpoint == sm {
    @media (max-width: variables.$breakpoint-sm - 1px) { @content; }
  } @else if $breakpoint == md {
    @media (max-width: variables.$breakpoint-md - 1px) { @content; }
  } @else if $breakpoint == lg {
    @media (max-width: variables.$breakpoint-lg - 1px) { @content; }
  } @else if $breakpoint == xl {
    @media (max-width: variables.$breakpoint-xl - 1px) { @content; }
  }
}

// ========================================
// FLEXBOX
// ========================================

// Flexbox centrado
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Flexbox centrado vertical
@mixin flex-center-vertical {
  display: flex;
  align-items: center;
}

// Flexbox centrado horizontal
@mixin flex-center-horizontal {
  display: flex;
  justify-content: center;
}

// Flexbox entre elementos
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// Flexbox alrededor de elementos
@mixin flex-around {
  display: flex;
  align-items: center;
  justify-content: space-around;
}

// Flexbox columna
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Flexbox columna centrada
@mixin flex-column-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

// ========================================
// POSICIONAMIENTO
// ========================================

// Posición absoluta centrada
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Posición absoluta centrada horizontal
@mixin absolute-center-x {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}

// Posición absoluta centrada vertical
@mixin absolute-center-y {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}

// Posición fija centrada
@mixin fixed-center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// ========================================
// TIPOGRAFÍA
// ========================================

// Texto truncado con ellipsis
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Texto truncado en múltiples líneas
@mixin text-truncate-multiline($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// Texto seleccionable
@mixin text-selectable {
  user-select: text;
  cursor: text;
}

// Texto no seleccionable
@mixin text-no-select {
  user-select: none;
  cursor: default;
}

// ========================================
// BORDES Y SOMBRAS
// ========================================

// Borde con radio
@mixin border-radius($radius: variables.$border-radius-md) {
  border-radius: $radius;
}

// Borde redondeado completo
@mixin border-radius-full {
  border-radius: variables.$border-radius-full;
}

// Sombra de elevación
@mixin elevation($level: 1) {
  @if $level == 1 {
    box-shadow: variables.$shadow-sm;
  } @else if $level == 2 {
    box-shadow: variables.$shadow-md;
  } @else if $level == 3 {
    box-shadow: variables.$shadow-lg;
  } @else if $level == 4 {
    box-shadow: variables.$shadow-xl;
  }
}

// Sombra personalizada
@mixin custom-shadow($x: 0, $y: 2px, $blur: 4px, $color: rgba(0, 0, 0, 0.1)) {
  box-shadow: $x $y $blur $color;
}

// ========================================
// TRANSICIONES
// ========================================

// Transición básica
@mixin transition($property: all, $duration: variables.$transition-normal, $easing: variables.$transition-ease) {
  transition: $property $duration $easing;
}

// Transición múltiple
@mixin transition-multiple($properties...) {
  $transitions: ();
  @each $property in $properties {
    $transitions: list.append($transitions, $property variables.$transition-normal variables.$transition-ease, comma);
  }
  transition: $transitions;
}

// Transición rápida
@mixin transition-fast($property: all) {
  transition: $property variables.$transition-fast variables.$transition-ease;
}

// Transición lenta
@mixin transition-slow($property: all) {
  transition: $property variables.$transition-slow variables.$transition-ease;
}

// ========================================
// HOVER Y FOCUS
// ========================================

// Hover con transición
@mixin hover-transition($property: all) {
  @include transition($property);
  
  &:hover {
    @content;
  }
}

// Focus visible
@mixin focus-visible {
  &:focus-visible {
    outline: 2px solid variables.$color-primary;
    outline-offset: 2px;
  }
}

// Focus con sombra
@mixin focus-shadow {
  &:focus {
    box-shadow: 0 0 0 3px rgba(variables.$color-primary, 0.1);
  }
}

// ========================================
// COMPONENTES
// ========================================

// Botón base
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: variables.$button-height;
  padding: 0 variables.$button-padding-x;
  border: none;
  border-radius: variables.$button-border-radius;
  font-family: variables.$font-family-primary;
  font-size: variables.$font-size-sm;
  font-weight: variables.$font-weight-medium;
  text-decoration: none;
  cursor: pointer;
  @include transition(all);
  @include focus-visible;
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

// Input base
@mixin input-base {
  width: 100%;
  height: variables.$input-height;
  padding: 0 variables.$input-padding-x;
  border: variables.$border-width solid variables.$border-color;
  border-radius: variables.$input-border-radius;
  font-family: variables.$font-family-primary;
  font-size: variables.$font-size-sm;
  background-color: variables.$color-surface;
  @include transition(border-color);
  @include focus-visible;
  
  &:focus {
    border-color: variables.$color-primary;
    outline: none;
  }
  
  &:disabled {
    background-color: variables.$color-disabled;
    cursor: not-allowed;
  }
}

// Card base
@mixin card-base {
  background-color: variables.$color-card;
  border-radius: variables.$card-border-radius;
  padding: variables.$card-padding;
  @include elevation(1);
}

// ========================================
// UTILIDADES
// ========================================

// Clearfix
@mixin clearfix {
  &::after {
    content: '';
    display: table;
    clear: both;
  }
}

// Scrollbar personalizada
@mixin custom-scrollbar($width: 8px, $track-color: transparent, $thumb-color: rgba(0, 0, 0, 0.2)) {
  &::-webkit-scrollbar {
    width: $width;
  }
  
  &::-webkit-scrollbar-track {
    background: $track-color;
  }
  
  &::-webkit-scrollbar-thumb {
    background: $thumb-color;
    border-radius: $width / 2;
    
    &:hover {
      background: rgba(0, 0, 0, 0.3);
    }
  }
}

// Placeholder
@mixin placeholder {
  &::-webkit-input-placeholder { @content; }
  &::-moz-placeholder { @content; }
  &:-ms-input-placeholder { @content; }
  &::placeholder { @content; }
}

// Selección de texto
@mixin text-selection($background: variables.$color-primary, $color: white) {
  &::selection {
    background-color: $background;
    color: $color;
  }
  
  &::-moz-selection {
    background-color: $background;
    color: $color;
  }
}

// ========================================
// ANIMACIONES
// ========================================

// Fade in
@mixin fade-in($duration: variables.$animation-duration-normal) {
  animation: fadeIn $duration ease-in-out;
}

// Slide in desde arriba
@mixin slide-in-top($duration: variables.$animation-duration-normal) {
  animation: slideInTop $duration ease-out;
}

// Slide in desde la izquierda
@mixin slide-in-left($duration: variables.$animation-duration-normal) {
  animation: slideInLeft $duration ease-out;
}

// Bounce
@mixin bounce($duration: variables.$animation-duration-normal) {
  animation: bounce $duration variables.$animation-bounce;
}

// ========================================
// KEYFRAMES
// ========================================

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInTop {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -30px, 0);
  }
  70% {
    transform: translate3d(0, -15px, 0);
  }
  90% {
    transform: translate3d(0, -4px, 0);
  }
}

